import{j as e,M as m}from"./index-DmeS5GNz.js";import{b as o,L as x}from"./vendor-7WqT3uju.js";import{a as g}from"./bookService-Bs2BJIUy.js";const p=s=>{if(!s)return"No description available.";const t=s.split(/\s+/);return t.length<=20?s:t.slice(0,15).join(" ")+"..."},v=()=>{const[s,t]=o.useState(null),[l,d]=o.useState([]),[h,c]=o.useState(!0);return o.useEffect(()=>{(async()=>{c(!0);try{const r=(await g()).filter(n=>n.book_status===1);if(d(r),r.length>0){const n=Math.floor(Math.random()*r.length);t(r[n])}}catch(i){console.error("Error:",i),m.toast({html:i.message})}c(!1)})()},[]),h?e.jsx("div",{className:"center-align",children:"Loading..."}):s?e.jsxs("div",{className:"container",children:[e.jsx("h3",{className:"center-align",children:"Featured Book"}),e.jsxs("div",{className:"card horizontal",children:[e.jsx("div",{className:"card-image",style:{width:"320px",padding:"20px"},children:e.jsx("img",{src:s.cover||"https://placehold.co/240x320",alt:s.title,style:{width:"100%",height:"auto"}})}),e.jsx("div",{className:"card-stacked",children:e.jsxs("div",{className:"card-content",children:[e.jsx("h4",{children:s.title}),e.jsxs("h5",{children:["By ",s.author]}),e.jsx("div",{className:"divider",style:{margin:"15px 0"}}),e.jsx("p",{children:p(s.description)}),e.jsx("div",{className:"divider",style:{margin:"15px 0"}}),e.jsxs(x,{to:`/book/${j(s.title)}`,className:"btn btn-large green",children:[e.jsx("i",{className:"material-icons left",children:"info"}),"View Details"]}),e.jsx("div",{className:"row",style:{marginTop:"20px"},children:e.jsxs("div",{className:"col s12",children:[e.jsx("span",{className:"chip teal white-text",children:s.category||"Uncategorized"}),s.tags&&s.tags.split(",").map(a=>e.jsx("span",{className:"chip",children:a.trim()},a))]})})]})})]}),e.jsx("div",{className:"center-align",style:{marginTop:"40px"},children:e.jsxs("button",{onClick:()=>{const a=Math.floor(Math.random()*l.length);t(l[a])},className:"btn waves-effect waves-light grey",children:[e.jsx("i",{className:"material-icons left",children:"autorenew"}),"Show Another Book"]})})]}):e.jsx("div",{className:"center-align",children:"No books available"})},j=s=>s.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");export{v as default};
